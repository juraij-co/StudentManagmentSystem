<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.layout.*?>
<?import javafx.scene.control.*?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.shape.Rectangle?>
<?import javafx.scene.paint.Color?>

<VBox spacing="25" xmlns="http://javafx.com/javafx/8" 
      xmlns:fx="http://javafx.com/fxml/1"
      fx:controller="com.juru.TeacherDashboardHomeController"
      style="-fx-background-color: #f8f9fa;">

    <padding>
        <Insets top="25" right="25" bottom="25" left="25"/>
    </padding>

    <!-- Header Section -->
    <HBox alignment="CENTER_LEFT">
        <padding>
            <Insets bottom="10"/>
        </padding>
        <VBox spacing="5" HBox.hgrow="ALWAYS">
            <Label fx:id="welcomeLabel"
                   text="Welcome Back, Teacher!"
                   style="-fx-font-size: 28px; -fx-text-fill: #343a40; -fx-font-weight: bold;" />
            <Label text="Here's an overview of your classes and students"
                   style="-fx-text-fill: #6c757d; -fx-font-size: 14px;" />
        </VBox>
        <Region HBox.hgrow="ALWAYS" />
        <VBox alignment="CENTER_RIGHT" spacing="5">
            <Label fx:id="dateLabel" text="Monday, Oct 2, 2025"
                   style="-fx-text-fill: #495057; -fx-font-size: 14px; -fx-font-weight: bold;" />
            <Label fx:id="timeLabel" text="10:30 AM"
                   style="-fx-text-fill: #6c757d; -fx-font-size: 12px;" />
        </VBox>
    </HBox>

    <!-- Quick Stats Cards -->
    <GridPane hgap="20" vgap="20">
        <columnConstraints>
            <ColumnConstraints percentWidth="25"/>
            <ColumnConstraints percentWidth="25"/>
            <ColumnConstraints percentWidth="25"/>
            <ColumnConstraints percentWidth="25"/>
        </columnConstraints>

        <!-- Total Students Card -->
        <VBox GridPane.columnIndex="0" spacing="10"
              style="-fx-background-color: white; -fx-background-radius: 12; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.08), 10, 0, 0, 3); -fx-cursor: hand;">
            <padding>
                <Insets top="20" right="20" bottom="20" left="20"/>
            </padding>
            <HBox alignment="CENTER_LEFT" spacing="15">
                <StackPane style="-fx-background-color: #e8f5e8; -fx-background-radius: 10;">
                    <padding>
                        <Insets top="10" right="10" bottom="10" left="10"/>
                    </padding>
                    <Label text="👨‍🎓" style="-fx-font-size: 18px;" />
                </StackPane>
                <VBox spacing="2">
                    <Label fx:id="totalStudentsLabel" text="0" 
                           style="-fx-font-size: 24px; -fx-text-fill: #2e7d32; -fx-font-weight: bold;" />
                    <Label text="Total Students" 
                           style="-fx-text-fill: #666; -fx-font-size: 12px;" />
                </VBox>
            </HBox>
            <Label fx:id="studentsTrendLabel" text="Loading..." 
                   style="-fx-text-fill: #4caf50; -fx-font-size: 11px; -fx-font-weight: bold;" />
        </VBox>

        <!-- Today's Classes Card -->
        <VBox GridPane.columnIndex="1" spacing="10"
              style="-fx-background-color: white; -fx-background-radius: 12; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.08), 10, 0, 0, 3); -fx-cursor: hand;">
            <padding>
                <Insets top="20" right="20" bottom="20" left="20"/>
            </padding>
            <HBox alignment="CENTER_LEFT" spacing="15">
                <StackPane style="-fx-background-color: #e3f2fd; -fx-background-radius: 10;">
                    <padding>
                        <Insets top="10" right="10" bottom="10" left="10"/>
                    </padding>
                    <Label text="📚" style="-fx-font-size: 18px;" />
                </StackPane>
                <VBox spacing="2">
                    <Label fx:id="todayClassesLabel" text="0" 
                           style="-fx-font-size: 24px; -fx-text-fill: #1565c0; -fx-font-weight: bold;" />
                    <Label text="Today's Classes" 
                           style="-fx-text-fill: #666; -fx-font-size: 12px;" />
                </VBox>
            </HBox>
            <Label fx:id="classesInfoLabel" text="Loading..." 
                   style="-fx-text-fill: #666; -fx-font-size: 11px; -fx-font-weight: bold;" />
        </VBox>

        <!-- Attendance Card -->
        <VBox GridPane.columnIndex="2" spacing="10"
              style="-fx-background-color: white; -fx-background-radius: 12; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.08), 10, 0, 0, 3); -fx-cursor: hand;">
            <padding>
                <Insets top="20" right="20" bottom="20" left="20"/>
            </padding>
            <HBox alignment="CENTER_LEFT" spacing="15">
                <StackPane style="-fx-background-color: #f3e5f5; -fx-background-radius: 10;">
                    <padding>
                        <Insets top="10" right="10" bottom="10" left="10"/>
                    </padding>
                    <Label text="📊" style="-fx-font-size: 18px;" />
                </StackPane>
                <VBox spacing="2">
                    <Label fx:id="attendancePercentLabel" text="0%" 
                           style="-fx-font-size: 24px; -fx-text-fill: #7b1fa2; -fx-font-weight: bold;" />
                    <Label text="Today's Attendance" 
                           style="-fx-text-fill: #666; -fx-font-size: 12px;" />
                </VBox>
            </HBox>
            <Label fx:id="attendanceInfoLabel" text="Loading..." 
                   style="-fx-text-fill: #666; -fx-font-size: 11px; -fx-font-weight: bold;" />
        </VBox>

        <!-- Subjects Card -->
        <VBox GridPane.columnIndex="3" spacing="10"
              style="-fx-background-color: white; -fx-background-radius: 12; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.08), 10, 0, 0, 3); -fx-cursor: hand;">
            <padding>
                <Insets top="20" right="20" bottom="20" left="20"/>
            </padding>
            <HBox alignment="CENTER_LEFT" spacing="15">
                <StackPane style="-fx-background-color: #e0f2f1; -fx-background-radius: 10;">
                    <padding>
                        <Insets top="10" right="10" bottom="10" left="10"/>
                    </padding>
                    <Label text="📖" style="-fx-font-size: 18px;" />
                </StackPane>
                <VBox spacing="2">
                    <Label fx:id="totalSubjectsLabel" text="0" 
                           style="-fx-font-size: 24px; -fx-text-fill: #00796b; -fx-font-weight: bold;" />
                    <Label text="Total Subjects" 
                           style="-fx-text-fill: #666; -fx-font-size: 12px;" />
                </VBox>
            </HBox>
            <Label fx:id="subjectsInfoLabel" text="Loading..." 
                   style="-fx-text-fill: #4caf50; -fx-font-size: 11px; -fx-font-weight: bold;" />
        </VBox>
    </GridPane>

    <!-- Enhanced Timetable Section -->
    <VBox spacing="15" style="-fx-background-color: white; 
        -fx-background-radius: 12; 
        -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.08), 10, 0, 0, 3);
        -fx-padding: 20;">
        
        <HBox alignment="CENTER_LEFT" spacing="10">
            <Label text="📅 Weekly Timetable"
                   style="-fx-font-size: 18px; -fx-font-weight: bold; -fx-text-fill: #333;" />
            <Region HBox.hgrow="ALWAYS" />
            <Label text="Current Week" 
                   style="-fx-text-fill: #666; -fx-font-size: 12px; -fx-font-style: italic;" />
        </HBox>

        <!-- Enhanced Timetable Grid -->
        <GridPane fx:id="timetableGrid" hgap="1" vgap="1"
                  style="-fx-background-color: #e9ecef; 
                         -fx-border-color: #dee2e6; 
                         -fx-border-radius: 8;
                         -fx-border-width: 1;">
            
            <columnConstraints>
                <ColumnConstraints percentWidth="20" minWidth="120" />
                <ColumnConstraints percentWidth="16" minWidth="80" />
                <ColumnConstraints percentWidth="16" minWidth="80" />
                <ColumnConstraints percentWidth="16" minWidth="80" />
                <ColumnConstraints percentWidth="16" minWidth="80" />
                <ColumnConstraints percentWidth="16" minWidth="80" />
            </columnConstraints>
            
            <rowConstraints>
                <RowConstraints percentHeight="14" minHeight="40" />
                <RowConstraints percentHeight="17" minHeight="50" />
                <RowConstraints percentHeight="17" minHeight="50" />
                <RowConstraints percentHeight="17" minHeight="50" />
                <RowConstraints percentHeight="17" minHeight="50" />
                <RowConstraints percentHeight="17" minHeight="50" />
            </rowConstraints>

            <!-- Header Row -->
            <VBox style="-fx-background-color: #495057; -fx-alignment: center;" 
                  GridPane.rowIndex="0" GridPane.columnIndex="0">
                <Label text="DAY / PERIOD" 
                       style="-fx-font-weight: bold; -fx-text-fill: white; -fx-font-size: 12px;" />
            </VBox>
            
            <!-- Period Headers -->
            <VBox style="-fx-background-color: #6c757d; -fx-alignment: center;" 
                  GridPane.rowIndex="0" GridPane.columnIndex="1">
                <Label text="PERIOD 1" 
                       style="-fx-font-weight: bold; -fx-text-fill: white; -fx-font-size: 11px;" />
                <Label text="8:00-9:00" 
                       style="-fx-text-fill: #e9ecef; -fx-font-size: 10px;" />
            </VBox>
            
            <VBox style="-fx-background-color: #6c757d; -fx-alignment: center;" 
                  GridPane.rowIndex="0" GridPane.columnIndex="2">
                <Label text="PERIOD 2" 
                       style="-fx-font-weight: bold; -fx-text-fill: white; -fx-font-size: 11px;" />
                <Label text="9:00-10:00" 
                       style="-fx-text-fill: #e9ecef; -fx-font-size: 10px;" />
            </VBox>
            
            <VBox style="-fx-background-color: #6c757d; -fx-alignment: center;" 
                  GridPane.rowIndex="0" GridPane.columnIndex="3">
                <Label text="PERIOD 3" 
                       style="-fx-font-weight: bold; -fx-text-fill: white; -fx-font-size: 11px;" />
                <Label text="10:15-11:15" 
                       style="-fx-text-fill: #e9ecef; -fx-font-size: 10px;" />
            </VBox>
            
            <VBox style="-fx-background-color: #6c757d; -fx-alignment: center;" 
                  GridPane.rowIndex="0" GridPane.columnIndex="4">
                <Label text="PERIOD 4" 
                       style="-fx-font-weight: bold; -fx-text-fill: white; -fx-font-size: 11px;" />
                <Label text="11:15-12:15" 
                       style="-fx-text-fill: #e9ecef; -fx-font-size: 10px;" />
            </VBox>
            
            <VBox style="-fx-background-color: #6c757d; -fx-alignment: center;" 
                  GridPane.rowIndex="0" GridPane.columnIndex="5">
                <Label text="PERIOD 5" 
                       style="-fx-font-weight: bold; -fx-text-fill: white; -fx-font-size: 11px;" />
                <Label text="1:00-2:00" 
                       style="-fx-text-fill: #e9ecef; -fx-font-size: 10px;" />
            </VBox>

            <!-- Day Rows with alternating background -->
            <VBox style="-fx-background-color: #f8f9fa; -fx-alignment: center;" 
                  GridPane.rowIndex="1" GridPane.columnIndex="0">
                <Label text="MONDAY" 
                       style="-fx-font-weight: bold; -fx-text-fill: #495057; -fx-font-size: 13px;" />
            </VBox>
            
            <VBox style="-fx-background-color: #ffffff; -fx-alignment: center; -fx-padding: 5;" 
                  GridPane.rowIndex="2" GridPane.columnIndex="0">
                <Label text="TUESDAY" 
                       style="-fx-font-weight: bold; -fx-text-fill: #495057; -fx-font-size: 13px;" />
            </VBox>
            
            <VBox style="-fx-background-color: #f8f9fa; -fx-alignment: center;" 
                  GridPane.rowIndex="3" GridPane.columnIndex="0">
                <Label text="WEDNESDAY" 
                       style="-fx-font-weight: bold; -fx-text-fill: #495057; -fx-font-size: 13px;" />
            </VBox>
            
            <VBox style="-fx-background-color: #ffffff; -fx-alignment: center;" 
                  GridPane.rowIndex="4" GridPane.columnIndex="0">
                <Label text="THURSDAY" 
                       style="-fx-font-weight: bold; -fx-text-fill: #495057; -fx-font-size: 13px;" />
            </VBox>
            
            <VBox style="-fx-background-color: #f8f9fa; -fx-alignment: center;" 
                  GridPane.rowIndex="5" GridPane.columnIndex="0">
                <Label text="FRIDAY" 
                       style="-fx-font-weight: bold; -fx-text-fill: #495057; -fx-font-size: 13px;" />
            </VBox>

            <!-- Subject cells will be populated by controller -->
            <!-- These are placeholder cells that will be replaced -->
            <VBox style="-fx-background-color: #e8f5e8; -fx-alignment: center; -fx-padding: 8; -fx-border-color: #d4edda; -fx-border-width: 1;" 
                  GridPane.rowIndex="1" GridPane.columnIndex="1">
                <Label text="Math" 
                       style="-fx-font-weight: bold; -fx-text-fill: #155724; -fx-font-size: 12px;" />
                <Label text="Room 101" 
                       style="-fx-text-fill: #28a745; -fx-font-size: 10px;" />
            </VBox>
            
            <VBox style="-fx-background-color: #e3f2fd; -fx-alignment: center; -fx-padding: 8; -fx-border-color: #bbdefb; -fx-border-width: 1;" 
                  GridPane.rowIndex="1" GridPane.columnIndex="2">
                <Label text="Science" 
                       style="-fx-font-weight: bold; -fx-text-fill: #0d47a1; -fx-font-size: 12px;" />
                <Label text="Lab A" 
                       style="-fx-text-fill: #1976d2; -fx-font-size: 10px;" />
            </VBox>

        </GridPane>
        
        <!-- Timetable Legend -->
        <HBox spacing="15" alignment="CENTER_LEFT" style="-fx-padding: 10 0 0 0;">
            <Label text="Legend:" style="-fx-font-weight: bold; -fx-text-fill: #666; -fx-font-size: 12px;" />
            <HBox spacing="5" alignment="CENTER_LEFT">
                <Rectangle width="12" height="12" fill="#e8f5e8" stroke="#d4edda" />
                <Label text="Mathematics" style="-fx-text-fill: #666; -fx-font-size: 11px;" />
            </HBox>
            <HBox spacing="5" alignment="CENTER_LEFT">
                <Rectangle width="12" height="12" fill="#e3f2fd" stroke="#bbdefb" />
                <Label text="Science" style="-fx-text-fill: #666; -fx-font-size: 11px;" />
            </HBox>
            <HBox spacing="5" alignment="CENTER_LEFT">
                <Rectangle width="12" height="12" fill="#f3e5f5" stroke="#e1bee7" />
                <Label text="Languages" style="-fx-text-fill: #666; -fx-font-size: 11px;" />
            </HBox>
        </HBox>
    </VBox>

</VBox>